#/bin/bash

# populate added directories
for directory in `find /var/www -maxdepth 1 -type d | sed -n '1!p' | sed 's-/var/www/--g'`; do 
  site=$(echo -e "127.0.0.1\t$directory")

  grep -Fxq "$site" /etc/hosts
  if [ $? -eq 0 ]; then
    sed -i "1i$site" /etc/hosts
  fi
done

# remove deleted directories
for entry in `grep -o "127.0.0.1[[:space:]][[:alnum:]]\+" /etc/hosts | sed 's/127.0.0.1\t//'`; do
	if [ ! -d /var/www/$entry ]; then
		sed "/$entry/d" /etc/hosts
	fi
done